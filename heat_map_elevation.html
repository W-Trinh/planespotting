<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
    integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
    crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
    integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM="
    crossorigin=""></script>
    <style>
        #map {position: absolute; top: 150;bottom: 0; left: 0; right: 0;}
        button{
			background: rgb(8, 184, 96);
			color:#fff;
			border: none;
			padding:10px 20px;
            width: 300;
            height: 100;
            z-index: 100;
		}
    </style>
</head>
<body>
    <button onclick="onDownload()">Download</button>
    <div id = "map"></div>
    <script src="leaflet-heatmap.js"></script>
    <script src="collect_elevation_data.js"></script>
    <script>
        const sleep = ms => new Promise(r => setTimeout(r, ms));
        

        
        var cfg = {
            // radius should be small ONLY if scaleRadius is true (or small radius is intended)
            // if scaleRadius is false it will be the constant radius used in pixels
            "radius": 2,
            "maxOpacity": 1,
            // scales the radius based on map zoom
            "scaleRadius": true,
            // if set to false the heatmap uses the global maximum for colorization
            // if activated: uses the data maximum within the current map boundaries
            //   (there will always be a red spot with useLocalExtremas true)
            "useLocalExtrema": true,
            // which field name in your data represents the latitude - default "lat"
            latField: 'lat',
            // which field name in your data represents the longitude - default "lng"
            lngField: 'lng',
            // which field name in your data represents the data value - default "value"
            valueField: 'intensity'
        };


        //var heatmapLayer = new HeatmapOverlay(cfg);

        //console.log(points_elevation)

        var map = L.map('map', {
            center: [43.60058737045903, 1.4407218792739667],
            zoom: 14
        });
        
        L.tileLayer('https://api.maptiler.com/maps/basic-v2/{z}/{x}/{y}.png?key=Xcj0EoRZaKvfdhgrIsAb', {maxZoom: 19}).addTo(map);

        // var heat = L.heatLayer(
        //     points_elevation, 
        //     {
        //         minOpacity:50.0,
        //         max:1.0,
        //         radius: 10,
        //         gradient:{
        //             0.4: 'blue', 
        //             0.65: 'lime',
        //             1: 'red'
        //         }
        //     }).addTo(map);

        
        
    </script>
</body>
</html>