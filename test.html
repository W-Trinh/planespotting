<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
    integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
    crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
    integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM="
    crossorigin=""></script>
    <style>
        #map {position: absolute; top: 0;bottom: 0; left: 0; right: 0;}
    </style>
</head>
<body>
    <div id = "map"></div>
    <script>
        var map = L.map('map', {
            center: [43.60058737045903, 1.4407218792739667],
            zoom: 14
        });

         fetch('https://data.toulouse-metropole.fr/api/records/1.0/search/?dataset=espaces-verts&rows=3931&q=ENA')
            .then(res => res.json())
            .then(data => {
                data.records.forEach(record => {
                const shape = record.fields.geo_shape;
                const fields = record.fields;
                const popupContent = `<strong>${fields.nom}</strong><br>Type: ${fields.type}<br>Surface: ${fields.surface_m2} m²`;
                L.geoJson(shape, {
                style: {
                    fillColor: 'green', 
                    fillOpacity: 0.5,    
                    color: 'black',     
                    weight: 1            
                }
            }).bindPopup(popupContent).addTo(map);
            });
            console.log(data)
        });

        fetch('https://data.toulouse-metropole.fr/api/records/1.0/search/?dataset=espaces-verts&rows=3931&q=PJS')
            .then(res => res.json())
            .then(data => {
                data.records.forEach(record => {
                const shape = record.fields.geo_shape;
                const fields = record.fields;
                const popupContent = `<strong>${fields.nom}</strong><br>Type: ${fields.type}<br>Surface: ${fields.surface_m2} m²`;

                L.geoJson(shape, {
                style: {
                    fillColor: 'green',  
                    fillOpacity: 0.5,    
                    color: 'black',      
                    weight: 1           
                }
            }).bindPopup(popupContent).addTo(map);
            });
            console.log(data)
        });

            
        
        L.tileLayer('https://api.maptiler.com/maps/basic-v2/{z}/{x}/{y}.png?key=Xcj0EoRZaKvfdhgrIsAb', {maxZoom: 19}).addTo(map);

    </script>
</body>
</html>